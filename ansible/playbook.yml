- hosts: all
  tasks:
    - name: install pacman packages
      become: yes
      pacman:
        name: curl,git,tree,stow,yay,pulseaudio-alsa,pulseaudio-bluetooth,xbindkeys,bluez-utils
        state: present
    - name: install ansible-aur
      git:
        repo: https://github.com/kewlfft/ansible-aur.git
        dest: ~/.ansible/plugins/modules/aur
    - name: create aur_builder
      become: true
      user: name=aur_builder
    - name: add aur_builder to sudoers
      become: true
      lineinfile:
        path: /etc/sudoers.d/aur_builder-allow-to-sudo-pacman
        state: present
        line: "aur_builder ALL=(ALL) NOPASSWD: /usr/bin/pacman"
        validate: /usr/sbin/visudo -cf %s
        create: yes
    - name: install yay packages
      become: true
      become_user: aur_builder
      aur:
        use: yay
        skip_installed: true
        name:
          - i3status-rust
          - antibody
          - vlc-git
          - groovy
          - maven
          - slack-desktop
          - command-not-found
          - git-extras
          - python-cookiecutter
          - atlassian-jira
          - pass-git
          - grip
          - buku
          - cloc
          - marker
          - aerc
          - lazydocker
